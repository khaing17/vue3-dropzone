import { openBlock as n, createElementBlock as u, createElementVNode as v, Fragment as _, createCommentVNode as c, createStaticVNode as x, normalizeClass as N, renderList as de, renderSlot as M, normalizeStyle as R, withModifiers as w, createBlock as L, toDisplayString as b, pushScopeId as ee, popScopeId as te, computed as B, mergeProps as j, withCtx as W, normalizeProps as U, guardReactiveProps as I, ref as P, watchEffect as J, createVNode as Q } from "vue";
const T = (e, g) => {
  const m = e.__vccOpts || e;
  for (const [l, f] of g)
    m[l] = f;
  return m;
}, ue = {}, pe = {
  xmlns: "http://www.w3.org/2000/svg",
  width: "60",
  height: "60",
  viewBox: "0 0 24 24",
  fill: "none",
  style: { "flex-shrink": "0" }
}, ce = /* @__PURE__ */ v("path", {
  opacity: ".4",
  d: "M22 7.81v6.09l-1.63-1.4c-.78-.67-2.04-.67-2.82 0l-4.16 3.57c-.78.67-2.04.67-2.82 0l-.34-.28c-.71-.62-1.84-.68-2.64-.14l-4.92 3.3-.11.08c-.37-.8-.56-1.75-.56-2.84V7.81C2 4.17 4.17 2 7.81 2h8.38C19.83 2 22 4.17 22 7.81Z",
  fill: "#c3c3c3"
}, null, -1), ve = /* @__PURE__ */ v("path", {
  d: "M9.001 10.381a2.38 2.38 0 1 0 0-4.76 2.38 2.38 0 0 0 0 4.76ZM21.999 13.899v2.29c0 3.64-2.17 5.81-5.81 5.81h-8.38c-2.55 0-4.39-1.07-5.25-2.97l.11-.08 4.92-3.3c.8-.54 1.93-.48 2.64.14l.34.28c.78.67 2.04.67 2.82 0l4.16-3.57c.78-.67 2.04-.67 2.82 0l1.63 1.4Z",
  fill: "#c3c3c3"
}, null, -1), he = [
  ce,
  ve
];
function we(e, g) {
  return n(), u("svg", pe, he);
}
const fe = /* @__PURE__ */ T(ue, [["render", we]]), ge = {
  key: 0,
  xmlns: "http://www.w3.org/2000/svg",
  width: "40",
  height: "40",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-file-type-xls"
}, me = /* @__PURE__ */ x('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path><path d="M4 15l4 6"></path><path d="M4 21l4 -6"></path><path d="M17 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path><path d="M11 15v6h3"></path>', 7), ye = [
  me
], ke = {
  key: 1,
  xmlns: "http://www.w3.org/2000/svg",
  width: "40",
  height: "40",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-file-type-txt"
}, Me = /* @__PURE__ */ x('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M16.5 15h3"></path><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path><path d="M4.5 15h3"></path><path d="M6 15v6"></path><path d="M18 15v6"></path><path d="M10 15l4 6"></path><path d="M10 21l4 -6"></path>', 10), Se = [
  Me
], be = {
  key: 2,
  xmlns: "http://www.w3.org/2000/svg",
  width: "40",
  height: "40",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-file-type-doc"
}, Fe = /* @__PURE__ */ x('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path><path d="M5 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"></path><path d="M20 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0"></path><path d="M12.5 15a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1 -3 0v-3a1.5 1.5 0 0 1 1.5 -1.5z"></path>', 6), ze = [
  Fe
], $e = {
  key: 3,
  xmlns: "http://www.w3.org/2000/svg",
  width: "40",
  height: "40",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-file-type-pdf"
}, Pe = /* @__PURE__ */ x('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path><path d="M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"></path><path d="M17 18h2"></path><path d="M20 15h-3v6"></path><path d="M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z"></path>', 7), Be = [
  Pe
], xe = {
  key: 4,
  xmlns: "http://www.w3.org/2000/svg",
  width: "40",
  height: "40",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-file-type-csv"
}, Ce = /* @__PURE__ */ x('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"></path><path d="M7 16.5a1.5 1.5 0 0 0 -3 0v3a1.5 1.5 0 0 0 3 0"></path><path d="M10 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"></path><path d="M16 15l2 6l2 -6"></path>', 6), Oe = [
  Ce
], Ae = {
  key: 5,
  xmlns: "http://www.w3.org/2000/svg",
  width: "40",
  height: "40",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-video"
}, Ve = /* @__PURE__ */ v("path", {
  stroke: "none",
  d: "M0 0h24v24H0z",
  fill: "none"
}, null, -1), Ee = /* @__PURE__ */ v("path", { d: "M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z" }, null, -1), He = /* @__PURE__ */ v("path", { d: "M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z" }, null, -1), De = [
  Ve,
  Ee,
  He
], Ne = {
  __name: "Icon",
  props: {
    name: String
  },
  setup(e) {
    return (g, m) => (n(), u(_, null, [
      e.name === "xls" ? (n(), u("svg", ge, ye)) : c("", !0),
      e.name === "txt" ? (n(), u("svg", ke, Se)) : c("", !0),
      e.name === "doc" || e.name === "docx" ? (n(), u("svg", be, ze)) : c("", !0),
      e.name === "pdf" ? (n(), u("svg", $e, Be)) : c("", !0),
      e.name === "csv" ? (n(), u("svg", xe, Oe)) : c("", !0),
      e.name === "mp4" || e.name === "mkv" || e.name === "mpeg-4" || e.name === "webm" || e.name === "mov" ? (n(), u("svg", Ae, De)) : c("", !0)
    ], 64));
  }
}, le = (e) => (ee("data-v-7240d52d"), e = e(), te(), e), Re = ["src", "alt"], je = ["src", "alt"], We = ["onClick"], Ue = /* @__PURE__ */ le(() => /* @__PURE__ */ v("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  width: "20",
  height: "20",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-x"
}, [
  /* @__PURE__ */ v("path", {
    stroke: "none",
    d: "M0 0h24v24H0z",
    fill: "none"
  }),
  /* @__PURE__ */ v("path", { d: "M18 6l-12 12" }),
  /* @__PURE__ */ v("path", { d: "M6 6l12 12" })
], -1)), Ie = [
  Ue
], _e = {
  key: 4,
  class: "img-details"
}, Le = { key: 0 }, Te = { key: 1 }, qe = ["onClick"], Ze = /* @__PURE__ */ le(() => /* @__PURE__ */ v("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  width: "20",
  height: "20",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "icon icon-tabler icons-tabler-outline icon-tabler-x"
}, [
  /* @__PURE__ */ v("path", {
    stroke: "none",
    d: "M0 0h24v24H0z",
    fill: "none"
  }),
  /* @__PURE__ */ v("path", { d: "M18 6l-12 12" }),
  /* @__PURE__ */ v("path", { d: "M6 6l12 12" })
], -1)), Xe = [
  Ze
], Ge = {
  key: 6,
  class: "img-details"
}, Ke = { key: 0 }, Je = { key: 1 }, Qe = {
  key: 7,
  class: "progress-bar-container"
}, Ye = ["aria-valuenow"], et = {
  __name: "Preview",
  props: {
    files: {
      type: Array,
      default: []
    },
    previewUrls: {
      type: Array,
      default: []
      // Legacy prop, kept for backward compatibility
    },
    multiple: {
      type: Boolean,
      default: !1
    },
    mode: {
      type: String,
      default: "drop",
      validator(e) {
        return ["drop", "preview", "edit"].includes(e);
      }
    },
    allowSelectOnPreview: Boolean,
    imgWidth: [Number, String],
    imgHeight: [Number, String],
    previewWrapperClasses: String,
    removeFileBuiltIn: Function
  },
  emits: ["removeFile", "click"],
  setup(e, { emit: g }) {
    const m = g, l = (h) => {
      if (!h)
        return "Unknown size";
      const s = Math.floor(Math.log(h) / Math.log(1024));
      return (h / Math.pow(1024, s)).toFixed(2) * 1 + " " + ["B", "KB", "MB", "GB"][s];
    }, f = (h) => {
      m("removeFile", h);
    };
    return (h, s) => (n(), u("div", {
      class: N(["preview-container", e.previewWrapperClasses]),
      onClick: s[4] || (s[4] = (t) => h.$emit("click", t))
    }, [
      (n(!0), u(_, null, de(e.files, (t) => M(h.$slots, "preview", {
        key: t.id,
        data: t,
        formatSize: l,
        removeFile: e.removeFileBuiltIn
      }, () => [
        v("div", {
          class: N(["preview", {
            preview__multiple: e.multiple,
            preview__file: t.type === "file" && t.file && t.file.type && !t.file.type.includes("image/")
          }]),
          style: R({
            width: `${e.imgWidth} !important`,
            height: `${e.imgHeight} !important`
          }),
          onClick: s[3] || (s[3] = w(() => {
          }, ["stop"]))
        }, [
          t.type === "file" && t.file && t.file.type && t.file.type.includes("image/") ? (n(), u("img", {
            key: 0,
            src: t.src,
            alt: t.name || t.file && t.file.name,
            onClick: s[0] || (s[0] = w(() => {
            }, ["stop"]))
          }, null, 8, Re)) : c("", !0),
          t.type === "url" ? (n(), u("img", {
            key: 1,
            src: t.src,
            alt: t.name,
            onClick: s[1] || (s[1] = w(() => {
            }, ["stop"]))
          }, null, 8, je)) : c("", !0),
          t.type === "file" && t.file && t.file.type && !t.file.type.includes("image/") && !t.file.type.includes("video/") ? (n(), L(Ne, {
            key: 2,
            name: t.file ? t.file.name.split(".").pop() : "file",
            onClick: s[2] || (s[2] = w(() => {
            }, ["stop"]))
          }, null, 8, ["name"])) : c("", !0),
          (e.allowSelectOnPreview || e.mode === "edit") && t.type !== "url" ? (n(), u("button", {
            key: 3,
            type: "button",
            class: "img-remove",
            onClick: w((d) => e.removeFileBuiltIn ? e.removeFileBuiltIn(t) : f(t), ["stop"])
          }, Ie, 8, We)) : c("", !0),
          e.allowSelectOnPreview && e.mode !== "preview" ? (n(), u("div", _e, [
            t.name || t.file && t.file.name ? (n(), u("h2", Le, b(t.name || t.file.name), 1)) : c("", !0),
            t.size || t.file && t.file.size ? (n(), u("span", Te, b(l(t.size || t.file.size)), 1)) : c("", !0)
          ])) : c("", !0),
          t.type === "url" && (e.allowSelectOnPreview || e.mode === "edit") ? (n(), u("button", {
            key: 5,
            type: "button",
            class: "img-remove",
            onClick: w((d) => e.removeFileBuiltIn ? e.removeFileBuiltIn(t) : f(t), ["stop"])
          }, Xe, 8, qe)) : c("", !0),
          t.type === "url" && e.allowSelectOnPreview ? (n(), u("div", Ge, [
            t.name ? (n(), u("h2", Ke, b(t.name), 1)) : c("", !0),
            t.size ? (n(), u("span", Je, b(l(t.size)), 1)) : c("", !0)
          ])) : c("", !0),
          t.type === "file" && (t.status === "pending" || t.status === "uploading") ? (n(), u("div", Qe, [
            v("div", {
              class: "progress-bar",
              "aria-valuenow": t.progress,
              "aria-valuemin": "0",
              "aria-valuemax": "100",
              style: R({ width: `${t.progress}%` })
            }, b(t.progress) + "% ", 13, Ye)
          ])) : c("", !0)
        ], 6)
      ], !0)), 128))
    ], 2));
  }
}, tt = /* @__PURE__ */ T(et, [["__scopeId", "data-v-7240d52d"]]), Y = {
  __name: "PreviewSlot",
  props: {
    files: Array,
    previewUrls: Array,
    multiple: Boolean,
    mode: String,
    allowSelectOnPreview: Boolean,
    imgWidth: [Number, String],
    imgHeight: [Number, String],
    previewWrapperClasses: [String, Array, Object]
  },
  emits: ["removeFile", "click", "mouseover", "mouseleave"],
  setup(e, { emit: g }) {
    const m = e, l = g, f = B(() => ({
      ...m,
      removeFileBuiltIn: (h) => l("removeFile", h)
    }));
    return (h, s) => (n(), L(tt, j(f.value, {
      onClick: s[0] || (s[0] = (t) => h.$emit("click", t)),
      onMouseover: s[1] || (s[1] = (t) => h.$emit("mouseover", t)),
      onMouseleave: s[2] || (s[2] = (t) => h.$emit("mouseleave", t))
    }), {
      preview: W((t) => [
        M(h.$slots, "preview", U(I(t)))
      ]),
      _: 3
    }, 16));
  }
}, lt = (e) => (ee("data-v-90b773a0"), e = e(), te(), e), ot = { class: "dropzone" }, rt = ["id", "accept", "multiple"], it = /* @__PURE__ */ lt(() => /* @__PURE__ */ v("div", { class: "titles" }, [
  /* @__PURE__ */ v("h1", { class: "m-0" }, "Drop your files here")
], -1)), st = { class: "m-0 description" }, nt = {
  key: 1,
  class: "mt-5"
}, at = {
  __name: "Vue3Dropzone",
  props: {
    modelValue: {
      type: Array,
      default: []
    },
    multiple: {
      type: Boolean,
      default: !1
    },
    previews: {
      type: Array,
      default: []
    },
    mode: {
      type: String,
      default: "drop",
      validator(e) {
        return ["drop", "preview", "edit"].includes(e);
      }
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    state: {
      type: String,
      validator(e) {
        return ["error", "success", "indeterminate"].includes(e);
      },
      default: "indeterminate"
    },
    accept: String,
    maxFileSize: {
      type: Number,
      default: 5
    },
    maxFiles: {
      type: Number,
      default: 5
    },
    width: [Number, String],
    height: [Number, String],
    imgWidth: [Number, String],
    imgHeight: [Number, String],
    fileInputId: String,
    previewWrapperClasses: String,
    previewPosition: {
      type: String,
      default: "inside",
      validator: (e) => ["inside", "outside"].includes(e)
    },
    showSelectButton: {
      type: Boolean,
      default: !0
    },
    selectFileStrategy: {
      type: String,
      default: "replace",
      validator: (e) => ["replace", "merge"].includes(e)
    },
    serverSide: {
      type: Boolean,
      default: !1
    },
    uploadEndpoint: {
      type: String
    },
    deleteEndpoint: {
      type: String
    },
    headers: {
      type: Object,
      default: () => ({})
    },
    allowSelectOnPreview: {
      type: Boolean,
      default: !1
    },
    ignoreOriginalPreviews: {
      type: Boolean,
      default: !1
    }
  },
  emits: [
    "drop",
    "update:modelValue",
    "update:previews",
    "error",
    "fileUploaded",
    "fileRemoved",
    "previewRemoved"
  ],
  setup(e, { expose: g, emit: m }) {
    const l = e, f = B(() => {
      const r = [], o = l.mode === "preview" && l.allowSelectOnPreview && d.value && d.value.length > 0, a = l.selectFileStrategy === "merge" || l.selectFileStrategy === "replace" && !o && (!O.value || !l.ignoreOriginalPreviews) || l.mode !== "preview" || !l.allowSelectOnPreview;
      return l.previews && Array.isArray(l.previews) && l.previews.length > 0 && a && l.previews.forEach((p, i) => {
        p && typeof p == "string" && r.push({
          id: `preview-${i}`,
          src: p,
          type: "url",
          isPreview: !0,
          name: `Image ${i + 1}`,
          size: 0,
          // URL previews don't have size info
          progress: 100,
          status: "success",
          message: null
        });
      }), d.value && Array.isArray(d.value) && d.value.length > 0 && d.value.forEach((p) => {
        p && typeof p == "object" && r.push({
          ...p,
          type: p.isPreview ? "url" : "file",
          // Preview mode files should be treated as URL type for display
          isPreview: !!p.isPreview
        });
      }), r;
    }), h = B(() => ({
      files: f.value,
      previewUrls: [],
      // Legacy prop, no longer used
      multiple: l.multiple,
      mode: l.mode,
      allowSelectOnPreview: l.mode !== "preview" || l.allowSelectOnPreview,
      imgWidth: l.imgWidth,
      imgHeight: l.imgHeight,
      previewWrapperClasses: l.previewWrapperClasses,
      removeFileBuiltIn: C
    })), s = m, t = P(null), d = P([]), $ = P(!1), oe = P(null), O = P(!1), re = B(() => l.fileInputId ? l.fileInputId : A()), y = B(() => !l.disabled && (l.mode === "drop" || l.mode === "preview" && l.allowSelectOnPreview || l.mode === "edit")), A = () => Math.floor(Math.random() * Math.floor(Math.random() * Date.now())), q = (r) => {
      const o = [...r.target.files].slice(0, l.maxFiles), a = o.map((i) => (i.size / 1024 / 1024).toFixed(2) <= l.maxFileSize), p = o.map((i) => l.accept ? l.accept.includes(i.type) : []);
      if (a.every((i) => i === !0) && l.accept && p.every((i) => i === !0) || !l.accept && a.every((i) => i === !0)) {
        const i = (S) => ({
          file: S,
          id: A(),
          src: URL.createObjectURL(S),
          progress: 0,
          status: "pending",
          message: null,
          name: S.name,
          size: S.size,
          type: "file",
          isPreview: !1
        }), k = l.selectFileStrategy;
        if (l.mode === "preview" && l.allowSelectOnPreview) {
          const S = (z) => !z || !(z instanceof File) ? null : {
            file: z,
            id: A(),
            src: URL.createObjectURL(z),
            progress: 100,
            status: "success",
            message: null,
            name: z.name || "Unknown file",
            size: z.size || 0,
            type: "file",
            isPreview: !0
          }, K = o.map(S).filter(Boolean);
          k === "replace" && (d.value = K, O.value = !0), k === "merge" && (d.value = [...d.value, ...K]);
        } else
          k === "replace" && (d.value = o.map(i), l.mode === "edit" && s("update:previews", [])), k === "merge" && (d.value = [...d.value, ...o.map(i)]);
      }
      if (a.some((i) => i !== !0)) {
        const i = o.filter((k) => (k.size / 1024 / 1024).toFixed(2) > l.maxFileSize);
        F("file-too-large", i);
      }
      if (l.accept && p.some((i) => i !== !0)) {
        const i = o.filter(
          (k) => !l.accept.includes(k.type)
        );
        F("invalid-file-format", i);
      }
      d.value.filter((i) => i.status !== "success" && !i.isPreview).forEach((i) => {
        l.serverSide && l.mode !== "preview" ? ie(i) : l.mode !== "preview" && (i.progress = 100, i.status = "success", i.message = "File uploaded successfully", s("fileUploaded", { file: i }));
      });
    }, ie = (r) => {
      const o = new XMLHttpRequest();
      o.open("POST", l.uploadEndpoint || "", !0), Object.keys(l.headers).forEach((p) => {
        o.setRequestHeader(p, l.headers[p]);
      });
      const a = new FormData();
      a.append("file", r.file), o.upload.onloadstart = () => {
        r.status = "uploading", r.message = "Upload in progress";
      }, o.upload.onprogress = (p) => {
        p.lengthComputable && (r.progress = Math.round(p.loaded / p.total * 100));
      }, o.onload = () => {
        o.status === 200 ? (r.status = "success", r.message = "File uploaded successfully", s("fileUploaded", { file: r })) : (r.status = "error", r.message = o.statusText, F("upload-error", [r.file]));
      }, o.onerror = () => {
        r.status = "error", r.message = "Upload failed", F("upload-error", [r.file]);
      }, o.send(a);
    }, V = () => {
      y.value && ($.value = !$.value);
    }, se = (r) => {
      if (V(), y.value) {
        const o = {
          target: {
            files: [...r.dataTransfer.files]
          }
        };
        s("drop", r), q(o);
      }
    }, C = (r) => {
      if (!(!r || !r.id)) {
        if (r.type === "url") {
          const o = [...l.previews || []], a = parseInt(r.id.replace("preview-", ""));
          if (!isNaN(a) && a >= 0 && a < o.length)
            if (o.splice(a, 1), s("update:previews", o), s("previewRemoved", r), l.modelValue && Array.isArray(l.modelValue)) {
              const p = l.modelValue.filter(
                (i) => i !== r.src && (i == null ? void 0 : i.src) !== r.src
              );
              s("update:modelValue", p.length ? p : null);
            } else
              s("update:modelValue", null);
        } else
          r.isPreview ? E(r) : l.serverSide ? ne(r) : E(r);
        d.value.length === 0 && s("update:modelValue", null);
      }
    }, ne = (r) => {
      const o = new XMLHttpRequest();
      o.open("DELETE", l.deleteEndpoint ? `${l.deleteEndpoint}/${r.id}` : "", !0), Object.keys(l.headers).forEach((a) => {
        o.setRequestHeader(a, l.headers[a]);
      }), o.onload = () => {
        o.status === 200 ? E(r) : F("delete-error", [r]);
      }, o.onerror = () => {
        F("delete-error", [r]);
      }, o.send();
    }, E = (r) => {
      !r || !r.id || (d.value = d.value.filter((o) => o && o.id !== r.id), t.value && (t.value.value = ""), s("fileRemoved", r), s("update:modelValue", d.value));
    }, H = () => {
      y.value && ($.value = !0);
    }, D = () => {
      $.value = !1;
    }, Z = (r) => {
      y.value ? t.value.click() : r.preventDefault();
    }, F = (r, o) => {
      s("error", { type: r, files: o });
    };
    J(() => {
      d.value && d.value.length && s("update:modelValue", d.value);
    }), J(() => {
      l.ignoreOriginalPreviews === !1 && (!d.value || !Array.isArray(d.value) || d.value.length === 0) && (O.value = !1);
    });
    const ae = () => {
      f.value.forEach((r) => C(r));
    }, X = () => {
      d.value = [], s("update:modelValue", []);
    }, G = () => {
      s("update:previews", []);
    };
    return g({
      clearPreview: ae,
      clearFiles: X,
      clearPreviews: G,
      clearAll: () => {
        X(), G();
      }
    }), (r, o) => (n(), u("div", ot, [
      v("div", {
        class: N(["dropzone-wrapper", [
          {
            "dropzone-wrapper--active": $.value,
            "dropzone-wrapper--disabled": e.disabled
          },
          e.state ? `dropzone-wrapper--${e.state}` : ""
        ]]),
        style: R({ width: e.width, height: e.height }),
        onDragenter: w(V, ["prevent"]),
        onDragleave: w(V, ["prevent"]),
        onDrop: w(se, ["prevent"]),
        onDragover: o[4] || (o[4] = w(() => {
        }, ["prevent"])),
        onMouseover: H,
        onMouseleave: D,
        ref_key: "dropzoneWrapper",
        ref: oe,
        onClick: w(Z, ["self"]),
        id: "dropzoneWrapper"
      }, [
        v("input", {
          type: "file",
          ref_key: "fileInput",
          ref: t,
          class: "hidden",
          id: re.value,
          accept: e.accept,
          onInput: q,
          multiple: e.multiple
        }, null, 40, rt),
        !f.value.length || e.previewPosition === "outside" ? (n(), u(_, { key: 0 }, [
          M(r.$slots, "placeholder-img", {}, () => [
            Q(fe)
          ], !0),
          M(r.$slots, "title", {}, () => [
            it
          ], !0),
          M(r.$slots, "button", { fileInput: t.value }, () => [
            e.showSelectButton ? (n(), u("button", {
              key: 0,
              type: "button",
              onClick: o[0] || (o[0] = (a) => {
                var p;
                return (p = t.value) == null ? void 0 : p.click();
              }),
              class: "select-file"
            }, " Select File ")) : c("", !0)
          ], !0),
          M(r.$slots, "description", {}, () => [
            v("p", st, " Files must be under " + b(e.maxFileSize) + "MB " + b(e.accept ? `and in ${e.accept} formats` : ""), 1)
          ], !0)
        ], 64)) : c("", !0),
        e.previewPosition === "inside" && f.value.length ? (n(), L(Y, j({ key: 1 }, h.value, {
          onRemoveFile: C,
          onClick: o[1] || (o[1] = (a) => y.value && Z(a)),
          onMouseover: o[2] || (o[2] = (a) => y.value ? H : void 0),
          onMouseleave: o[3] || (o[3] = (a) => y.value ? D : void 0)
        }), {
          preview: W((a) => [
            M(r.$slots, "preview", U(I(a)), void 0, !0)
          ]),
          _: 3
        }, 16)) : c("", !0)
      ], 38),
      e.disabled ? (n(), u("div", {
        key: 0,
        class: "dropzone-wrapper__disabled",
        onClick: o[5] || (o[5] = w(() => {
        }, ["prevent"])),
        onDrop: o[6] || (o[6] = w(() => {
        }, ["prevent"])),
        onDragover: o[7] || (o[7] = w(() => {
        }, ["prevent"]))
      }, null, 32)) : c("", !0),
      e.previewPosition === "outside" && f.value.length ? (n(), u("div", nt, [
        Q(Y, j(h.value, {
          onRemoveFile: C,
          onMouseover: o[8] || (o[8] = (a) => y.value ? H : void 0),
          onMouseleave: o[9] || (o[9] = (a) => y.value ? D : void 0)
        }), {
          preview: W((a) => [
            M(r.$slots, "preview", U(I(a)), void 0, !0)
          ]),
          _: 3
        }, 16)
      ])) : c("", !0)
    ]));
  }
}, pt = /* @__PURE__ */ T(at, [["__scopeId", "data-v-90b773a0"]]);
export {
  pt as default
};
